<?php
include "db_connect.php";
session_start();
error_reporting(E_ALL);
ini_set('display_errors', 1);

// kalau bukan admin â†’ block
if(!isset($_SESSION['username']) || $_SESSION['username'] != "admin"){
    header("Location: LOGINN.php");
    exit;
}

// get data 
$lost = mysqli_query($conn, "SELECT * FROM lost_items ORDER BY date DESC");
$found = mysqli_query($conn, "SELECT * FROM found_items ORDER BY date DESC");
?>


<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>ADMIN</title>
	<style>
	body {
    background-image: url(image/bg.jpg);
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
}
.text-section {
  font-family: Cambria;
  text-align: center;
  color: #000;
  font-size: 20px;
  text-decoration: none;
}

.text-section2 {
    font-family: Arial;
    color: #000;
    font-size: 16px;
    text-decoration: none;
}

.Heading {
    font-family: 'Poppins', sans-serif;
    font-size: 40px;
    font-weight: 800;
    color: #000000;
    text-transform: uppercase;
    letter-spacing: 2px;
}

#recordTable {
    border-collapse: collapse;
    width: 90%;
    margin: 0 auto;
    background-color: #f8f8c3;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

#recordTable th, #recordTable td {
    padding: 15px;
    text-align: center;
    border-bottom: 1px solid #ddd;
}

#recordTable th {
    background-color: #f4e76e;
    font-weight: bold;
    font-size: 18px;
}

#recordTable tr:nth-child(even) {
    background-color: #fafafa;
}

#recordTable tr:hover {
    background-color: #fff9c4;
    transition: 0.3s;
}

/*  BUTTON STYLES */
.verify-btn {
  background-color: #d4edda; 
  color: #155724; 
  border: 1px solid #c3e6cb;
  border-radius: 10px;
  padding: 4px 8px;
  cursor: pointer;
  font-size: 12px;
  margin-right: 2px;
  transition: all 0.2s ease-in-out;
}

.verify-btn:hover {
  background-color: #c3e6cb;
}

.remove-btn {
  background-color: #f8d7da;
  color: #721c24; 
  border: 1px solid #f5c6cb;
  border-radius: 10px;
  padding: 4px 8px;
  cursor: pointer;
  font-size: 12px;
  transition: all 0.2s ease-in-out;
}

.remove-btn:hover {
  background-color: #f1b0b7;
}
		#recordTable td:last-child, 
#recordTable th:last-child {
  width: 160px; 
  text-align: center;
}
</style>
</head>

<body>
	<table width="1350" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr>
      <td width="250" align="center"><img src="image/logoo.png" width="250" height="100" alt=""/></td>
      <td width="261">&nbsp;</td>
      <td width="113" align="center"></td>
      <td width="115" align="center"></td>
      <td width="116" align="center"></td>
      <td width="116" align="center"><a href="http://localhost/I-found/ADMIN.php" class="text-section">Record&#9662</a></td>
      <td width="129" align="center"><a href="http://localhost/I-found/ADMIN_DASHBOARD.php" class="text-section">Dashboard&#9662</a></td>
      <td width="30" align="center"></td>
	  <td width="192" align="center">
		<a href="http://localhost/I-found/LOGINN.php" 
		   style="background-color: #FFF8F8;
				  color: #000000;
				  display: inline-block;
				  padding: 12px 20px;
				  font-size: 18px;
				  border-radius: 30px;
				  text-decoration: none;">Log Out</a>
	  </td>
    </tr>
  </tbody>
</table><br>
<main>
	<br><br><br>
	<div class="Heading" align="center"><strong>REPORT</strong></div>
	<br>
	<table width="1000" border="1" cellspacing="1" cellpadding="1" align="center" bgcolor="#f8f8c3" id="recordTable">
<tbody>
<tr>
    <th>Item Name</th>
    <th>Type</th>
    <th>Date</th>
    <th>Reported By</th>
    <th>Status</th>
    <th>Action</th>
</tr>

<?php
// LOST ITEMS
while($row = mysqli_fetch_assoc($lost)){
    echo "<tr>
        <td>{$row['item']}</td>
        <td>Lost</td>
        <td>{$row['date']}</td>
        <td>{$row['name']}</td>
        <td>{$row['status']}</td>
        <td>
            <a class='verify-btn' href='verify.php?type=lost&id={$row['id']}'>Verify</a>
            <a class='remove-btn' href='remove.php?type=lost&id={$row['id']}'>Remove</a>
        </td>
    </tr>";
}

// FOUND ITEMS
while($row = mysqli_fetch_assoc($found)){
    echo "<tr>
        <td>{$row['item']}</td>
        <td>Found</td>
        <td>{$row['date']}</td>
        <td>{$row['name']}</td>
        <td>{$row['status']}</td>
        <td>
            <a class='verify-btn' href='verify.php?type=found&id={$row['id']}'>Verify</a>
            <a class='remove-btn' href='remove.php?type=found&id={$row['id']}'>Remove</a>
        </td>
    </tr>";
}
?>
</tbody>
</table>
	</main>
<br><br><br><br>
	<hr style="width: 100%; height: 3px; background-color: black; border: none;">
<footer>
	<table width="1350" border="0" cellspacing="1" cellpadding="1">
  <tbody>
    <tr>
      <td width="360" height="81"><img src="image/logoo.png" width="250" height="100" alt=""/></td>
      <td width="152" align="center"><em><strong><u>SITE</u></strong></em><br>Lost<br>Report Lost<br>Found<br>Report Found</td>
      <td width="590" align="center"><font size="+1">&copy;2025 UPTM LOST AND FOUND SYSTEM</font></td>
      
      <td width="235" align="left"><font size="+1"><em><strong><u>Contact</u></strong></em></font><br>Tel: 011-58939306<br>Email: lostfound@uptm.edu.my<br>
        <img src="image/fb.png" width="50" height="40" style="vertical-align:middle; margin-right:5px;" alt="Facebook"/>
  		<img src="image/ig.png" width="50" height="40" style="vertical-align:middle; margin-right:5px;" alt="Instagram"/>
  		<img src="image/aboutUs.png" width="50" height="40" style="vertical-align:middle;" alt="About Us"/></td>
    </tr>
  </tbody>
</table>

	</footer>
</body>
</html>
